### Web Storage

HTML5 에는 웹의 데이터를 클라이언트에 저장 할 수 있는 새로운 자료구조인 **Web Storage** 스펙이 포함되어 있다. Web Storage의 개념은 **키/값 쌍으로 데이터를 저장**하고, 키를 기반으로 **데이터를 조회**하는 패턴이다.

이 데이터를 지속성 여부를 구분하여 **영구 저장소 (Local Storage)** 와 **임시 저장소 (Session Storage)**로 나누어 응용 환경에 맞게 선택할 수 있다.

**Web** **Storage**는 기존 웹 환경의 **쿠키(Cookie)**와 매우 유사한 개념이며, 쿠키의 단점을 극복하는 개선점이 도입되었다. 그러나 쿠키 또한 여전히 유효하고 적절한 클라이언트 저장 도구 이므로, HTML5에서 쿠키를 배제하지는 않는다.

### Web Storage와 Cookie의 차이점

- 쿠키는 매번 서버로 전송된다.
  - 웹에서 **쿠키**를 설정하면, 이후 모든 웹 요청은 **쿠키 정보를 포함하여 서버로 전송**되는 반면, **Web Storage**는 저장된 데이터가 클라이언트에 존재 할 뿐, **서버로의 전송이 이루어 지지 않는다.** 이는 네트워크 트래픽 비용을 줄여준다.
- Web Storage는 단순 문자열을 넘어 객체 정보를 저장할 수 있다.
- Web Storage는 용량의 제한이 없다.
  - 쿠키는 **개수(하나의 사이트에 20개) 와 용량(최대 4KB)에 제한**이 있다. 그러나 쿠키도 특정 방법을 이용하면 이러한 제한을 일부 해소할 수 있고, 대부분 쿠키의 제한을 넘어서는 데이터를 저장할 일이 없다.
- Web Storage는 영구 데이터 저장이 가능하다.
  - 쿠키는 만료 일자를 지정하게 되어 있어 언젠가 제거된다. 만약 만료 일자를 지정하지 않으면 세션 쿠키가 된다.

### Local Storage와 Session Storage

Web Storage는 데이터의 지속성과 관련하여 두 가지 용도의 저장소를 제공한다.

Web Storage는 쿠키와 마찬가지로 **데이터의 보안**을 위해 **사이트의 도메인 단위로 접근이 제한**된다. A 도메인에서 저장한 데이터를 B 도메인에서는 조회할 수 없는 것이다.

**Local Storage (영구적)**

- 저장한 데이터를 명시적으로 지우지 않는 이상 영구적으로 보관이 가능하며, 도메인 마다 별도로 Local Storage가 생성된다.
  - 브라우저를 종료해도 데이터는 보관되어 다음번 접속에도 그 데이터를 사용할 수 있다.
- **Windows 전역 객체의 Local Storage** 라는 컬렉션을 통해 저장과 조회가 이루어 진다.
- 도메인만 같으면 데이터 범위가 전역적으로 공유 가능하다.

**Session Storage (일시적)**

- Session Storage는 데이터의 지속성과 액세스 범위에 특수한 제한이 존재한다.
  - 브라우저 기반 세션 쿠키처럼 데이터가 지속적으로 보관되지 않는다.
  - 현재 페이지가 브라우징되고 있는 브라우저 컨텍스트 내에서만 데이터가 유지된다. 즉, 브라우저가 종료되면 데이터가 삭제된다.
- **Windows 전역 객체의 Session Storage** 라는 컬렉션을 통해 저장과 조회가 이루어진다.
- 탭 브라우징이나 브라우저를 하나 더 실행해서 같은 페이지를 실행 했을 때, Seesion Storage는 각각 별개의 영역을 침범할 수 없다.

<aside>
💡 Web Storage의 보안은 서로 다른 도메인의 데이터 침범을 막고는 있지만 클라이언트, 즉 사용자를 막고 있지는 않다. 클라이언트는 얼마든지 저장된 값을 임의로 수정이 가능하다. 이는 쿠키와 동일한 개념인데, 쿠키에 비해 별다른 보안 취약점을 더 가진 것은 아니다. 따라서 개발자는 사용자에 의한 임의 변경에 항상 예의 주시하고 방어 코드의 작성을 잊지 말아야 한다.

</aside>
